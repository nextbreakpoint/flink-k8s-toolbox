{{- $name := include "flink-k8s-toolbox.name" . -}}
{{- $chart := include "flink-k8s-toolbox.chart" . -}}
{{- $root := . }}
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: flinkclusters.nextbreakpoint.com
  labels:
    chart: {{ $chart }}
    release: {{ $root.Release.Name }}
    heritage: {{ $root.Release.Service }}
spec:
  group: nextbreakpoint.com
  versions:
    - name: v1
      served: true
      storage: true
  scope: Namespaced
  names:
    plural: flinkclusters
    singular: flinkcluster
    kind: FlinkCluster
    shortNames:
    - fc
validation:
  openAPIV3Schema:
    type: object
    properties:
      metadata:
        type: object
        nullable: true
      status:
        type: object
        nullable: true
      spec:
        type: object
    required:
      - spec
additionalPrinterColumns:
  - name: ClusterStatus
    type: string
    JSONPath: .status.clusterStatus
  - name: TaskStatus
    type: string
    JSONPath: .status.taskStatus
  - name: Task
    type: string
    JSONPath: .status.tasks[0]
  - name: SavepointPath
    type: string
    JSONPath: .status.savepointPath
