{
  "supervisor": {
    "image": "integration/flinkctl:1.4.3-beta",
    "serviceAccount": "flink-supervisor",
    "taskTimeout": 120,
    "rescaleDelay": 30,
    "replicas": 1,
    "resources": {
      "limits": {
        "cpu": "1",
        "memory": "200Mi"
      },
      "requests": {
        "cpu": "0.1",
        "memory": "200Mi"
      }
    }
  },
  "runtime": {
    "pullPolicy": "Never",
    "image": "integration/flink:1.11.3"
  },
  "jobManager": {
    "serviceMode": "NodePort",
    "annotations": {
      "managed": "true"
    },
    "command": [
      "bash"
    ],
    "args": [
      "-c",
      "FLINK_PROPERTIES=\"$(FLINK_PROPERTIES)\\ns3.access-key: $(S3_ACCESS_KEY)\\ns3.secret-key: $(S3_SECRET_KEY)\" /docker-entrypoint.sh jobmanager"
    ],
    "environmentFrom": [
      {
        "configMapRef": {
          "name": "integration-jobmanager-properties-v1"
        }
      },
      {
        "secretRef": {
          "name": "integration-aws-credentials-v1"
        }
      }
    ],
    "volumeMounts": [
      {
        "name": "config-vol",
        "mountPath": "/var/config/computeaverage.conf",
        "subPath": "computeaverage.conf"
      },
      {
        "name": "config-vol",
        "mountPath": "/var/config/computemaximum.conf",
        "subPath": "computemaximum.conf"
      }
    ],
    "volumes": [
      {
        "name": "config-vol",
        "configMap": {
          "name": "integration-job-parameters-v1"
        }
      }
    ],
    "extraPorts": [
      {
        "name": "prometheus",
        "containerPort": 9250,
        "protocol": "TCP"
      }
    ],
    "resources": {
      "limits": {
        "cpu": "1",
        "memory": "600Mi"
      },
      "requests": {
        "cpu": "0.1",
        "memory": "128Mi"
      }
    }
  },
  "taskManager": {
    "taskSlots": 1,
    "annotations": {
      "managed": "true"
    },
    "command": [
      "bash"
    ],
    "args": [
      "-c",
      "FLINK_PROPERTIES=\"$(FLINK_PROPERTIES)\\ns3.access-key: $(S3_ACCESS_KEY)\\ns3.secret-key: $(S3_SECRET_KEY)\" /docker-entrypoint.sh taskmanager"
    ],
    "environmentFrom": [
      {
        "configMapRef": {
          "name": "integration-taskmanager-properties-v1"
        }
      },
      {
        "secretRef": {
          "name": "integration-aws-credentials-v1"
        }
      }
    ],
    "extraPorts": [
      {
        "name": "prometheus",
        "containerPort": 9250,
        "protocol": "TCP"
      }
    ],
    "resources": {
      "limits": {
        "cpu": "1",
        "memory": "600Mi"
      },
      "requests": {
        "cpu": "0.1",
        "memory": "256Mi"
      }
    }
  }
}
